{"version":3,"sources":["../src/ReactSixteenOneAdapter.js"],"names":["HostRoot","ClassComponent","FunctionalComponent","HostPortal","HostComponent","HostText","FragmentType","Mode","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","displayNamesByType","Fragment","Portal","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","elementToTree","children","containerInfo","props","nodeType","key","ref","instance","rendered","toTree","vnode","tag","childrenToTree","child","stateNode","memoizedProps","renderedNodes","map","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","eventOptions","animation","getEmptyStateValue","EmptyState","React","Component","testRenderer","ShallowRenderer","render","createElement","_instance","state","ReactSixteenOneAdapter","lifecycles","options","legacyContextMode","componentDidUpdate","onSetState","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","context","callback","wrapperProps","refProp","ReactWrapperComponent","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternalFiber","simulateError","nodeHierarchy","rootNode","error","find","x","componentDidCatch","catchingInstance","displayNameOfNode","simulateEvent","event","mock","mappedEvent","eventFn","TestUtils","Simulate","TypeError","batchedUpdates","fn","getWrappingComponentRenderer","inst","getMountWrapperInstance","renderer","isDOM","cachedNode","unmaskedContext","isStateful","prototype","isReactComponent","__reactAutoBindPairs","contextTypes","emptyStateValue","Object","defineProperty","configurable","enumerable","get","set","value","writable","output","getRenderOutput","concat","args","handler","checkPropTypes","typeSpecs","values","location","hierarchy","childContextTypes","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","supportsArray","nodes","$$typeof","object","component","RootFinder","module","exports"],"mappings":"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","file":"ReactSixteenOneAdapter.js","sourcesContent":["/* eslint no-use-before-define: 0 */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved\nimport ShallowRenderer from 'react-test-renderer/shallow';\n// eslint-disable-next-line import/no-unresolved\nimport TestUtils from 'react-dom/test-utils';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport {\n  isElement,\n  isPortal,\n  isValidElementType,\n  Fragment,\n  Portal,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n} from 'enzyme-adapter-utils';\nimport { findCurrentFiberUsingSlowPath } from 'react-reconciler/reflection';\n\nconst HostRoot = 3;\nconst ClassComponent = 2;\nconst FunctionalComponent = 1;\nconst HostPortal = 4;\nconst HostComponent = 5;\nconst HostText = 6;\nconst FragmentType = 10;\nconst Mode = 11;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nconst displayNamesByType = {\n  [Fragment]: 'Fragment',\n  [Portal]: 'Portal',\n};\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case HostRoot: // 3\n      return childrenToTree(node.child);\n    case HostPortal: { // 4\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FunctionalComponent: // 1\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case HostComponent: { // 5\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case HostText: // 6\n      return node.memoizedProps;\n    case FragmentType: // 10\n    case Mode: // 11\n      return childrenToTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nconst eventOptions = { animation: true };\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n\n  // eslint-disable-next-line react/prefer-stateless-function\n  class EmptyState extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  const testRenderer = new ShallowRenderer();\n  testRenderer.render(React.createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nclass ReactSixteenOneAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        if (instance === null) {\n          const { type, props, ref } = el;\n          const wrapperProps = {\n            Component: type,\n            props,\n            wrappingComponentProps,\n            context,\n            ...(ref && { refProp: ref }),\n          };\n          const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n          const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n          instance = hydrateIn\n            ? ReactDOM.hydrate(wrappedEl, domNode)\n            : ReactDOM.render(wrappedEl, domNode);\n          if (typeof callback === 'function') {\n            callback();\n          }\n        } else {\n          instance.setChildProps(el.props, context, callback);\n        }\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternalFiber),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const { instance: catchingInstance } = nodeHierarchy\n          .find((x) => x.instance && x.instance.componentDidCatch) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          rootNode,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        // eslint-disable-next-line react/no-find-dom-node\n        eventFn(adapter.nodeToHostNode(node), mock);\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternalFiber),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n    };\n  }\n\n  createShallowRenderer(/* options */) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    let isDOM = false;\n    let cachedNode = null;\n    return {\n      render(el, unmaskedContext) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else {\n          isDOM = false;\n          const { type: Component } = el;\n\n          const isStateful = Component.prototype && (\n            Component.prototype.isReactComponent\n            || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n          );\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (!isStateful && typeof Component === 'function') {\n            const wrappedEl = Object.assign(\n              (...args) => Component(...args), // eslint-disable-line new-cap\n              Component,\n            );\n            return withSetStateAllowed(() => renderer.render({ ...el, type: wrappedEl }, context));\n          }\n          if (isStateful) {\n            // fix react bug; see implementation of `getEmptyStateValue`\n            const emptyStateValue = getEmptyStateValue();\n            if (emptyStateValue) {\n              Object.defineProperty(Component.prototype, 'state', {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return null;\n                },\n                set(value) {\n                  if (value !== emptyStateValue) {\n                    Object.defineProperty(this, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      value,\n                      writable: true,\n                    });\n                  }\n                  return true;\n                },\n              });\n            }\n          }\n          return withSetStateAllowed(() => renderer.render(el, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          cachedNode,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(\n          typeSpecs,\n          values,\n          location,\n          displayNameOfNode(cachedNode),\n          () => getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    return React.createElement(node.type, propsWithKeysAndRef(node));\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      return nodes[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n\n    const { type, $$typeof } = node;\n    return displayNamesByType[type || $$typeof] || displayNameOfNode(node);\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return isValidElementType(object);\n  }\n\n  isCustomComponent(component) {\n    return typeof component === 'function';\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSixteenOneAdapter;\n"]}